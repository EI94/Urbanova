# Environment Production - Urbanova
# Configurazione completa per ambiente di produzione

# Database PostgreSQL con PostGIS
DB_HOST=localhost
DB_PORT=5432
DB_NAME=urbanova_production
DB_USER=urbanova_user
DB_PASSWORD=your_secure_password_here
DB_SSL=true
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_ACQUIRE_TIMEOUT=10000
DB_CREATE_TIMEOUT=10000
DB_DESTROY_TIMEOUT=5000
DB_REAP_INTERVAL=1000
DB_CREATE_RETRY_INTERVAL=200
DB_PROPAGATE_CREATE_ERROR=false

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0
REDIS_CLUSTER_NODES=localhost:6379,localhost:6380,localhost:6381

# Logging
LOG_LEVEL=info
ENABLE_ACCESS_LOG=true

# API Configuration
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX_REQUESTS=100
API_RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
API_RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Security
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRES_IN=24h
BCRYPT_ROUNDS=12
SESSION_SECRET=your_session_secret_here

# CORS
CORS_ORIGIN=https://urbanova.com,https://www.urbanova.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# File Upload
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password_here
EMAIL_FROM=noreply@urbanova.com

# Firebase Configuration
FIREBASE_PROJECT_ID=urbanova-production
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@urbanova-production.iam.gserviceaccount.com
FIREBASE_STORAGE_BUCKET=urbanova-production.appspot.com

# Google Maps API
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# Monitoring
ENABLE_MONITORING=true
MONITORING_INTERVAL=30000
HEALTH_CHECK_INTERVAL=60000
PERFORMANCE_MONITORING=true

# Cache Configuration
CACHE_TTL_DEFAULT=3600
CACHE_TTL_SEARCH=1800
CACHE_TTL_STATS=300
CACHE_TTL_AUTOCOMPLETE=1800

# Search Configuration
SEARCH_MAX_RESULTS=100
SEARCH_DEFAULT_LIMIT=20
SEARCH_FUZZY_THRESHOLD=0.3
SEARCH_SPATIAL_RADIUS_DEFAULT=50

# Performance
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
ENABLE_CDN=true
CDN_URL=https://cdn.urbanova.com

# Error Handling
ERROR_REPORTING=true
ERROR_REPORTING_URL=https://sentry.io/api/your-project/dsn
ERROR_REPORTING_ENVIRONMENT=production

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=urbanova-backups
BACKUP_S3_REGION=eu-west-1

# SSL/TLS
SSL_CERT_PATH=/etc/ssl/certs/urbanova.com.crt
SSL_KEY_PATH=/etc/ssl/private/urbanova.com.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Load Balancer
LOAD_BALANCER_ENABLED=true
LOAD_BALANCER_HEALTH_CHECK_PATH=/api/health
LOAD_BALANCER_HEALTH_CHECK_INTERVAL=30

# CDN Configuration
CDN_ENABLED=true
CDN_PROVIDER=cloudflare
CDN_CACHE_TTL=86400
CDN_PURGE_ON_DEPLOY=true

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_PROVIDER=google
ANALYTICS_TRACKING_ID=GA-XXXXXXXXX
ANALYTICS_EVENTS_TRACKING=true

# Feature Flags
FEATURE_FLAGS_ENABLED=true
FEATURE_FLAGS_PROVIDER=launchdarkly
FEATURE_FLAGS_CLIENT_KEY=your_launchdarkly_key_here

# Urbanova Feature Flags
# Urbanova OS 2.0 - Sistema multiagente avanzato (default: false in prod, true dopo testing)
NEXT_PUBLIC_OS_V2_ENABLED=false
OS_V2_ENABLED=false

# Business Plan v2 con scenari multipli (stabile)
NEXT_PUBLIC_BUSINESS_PLAN_V2_ENABLED=true

# Market Intelligence (stabile)
NEXT_PUBLIC_MARKET_INTELLIGENCE_ENABLED=true

# Debug Mode (disabled in production)
NEXT_PUBLIC_DEBUG_MODE=false

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Database Optimization
DB_QUERY_TIMEOUT=30000
DB_CONNECTION_POOL_SIZE=20
DB_IDLE_TIMEOUT=30000
DB_ACQUIRE_TIMEOUT=10000
DB_CREATE_TIMEOUT=10000

# Redis Optimization
REDIS_CONNECTION_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_DELAY_ON_FAILOVER=100
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_KEEP_ALIVE=30000

# Logging Optimization
LOG_ROTATION_ENABLED=true
LOG_MAX_SIZE=10MB
LOG_MAX_FILES=5
LOG_COMPRESS=true
LOG_DATE_PATTERN=YYYY-MM-DD

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SAMPLING_RATE=0.1
PERFORMANCE_METRICS_INTERVAL=60000
PERFORMANCE_ALERT_THRESHOLD=1000

# Security Headers
SECURITY_HEADERS_ENABLED=true
SECURITY_HEADERS_HSTS_MAX_AGE=31536000
SECURITY_HEADERS_CONTENT_TYPE_OPTIONS=nosniff
SECURITY_HEADERS_FRAME_OPTIONS=DENY
SECURITY_HEADERS_XSS_PROTECTION=1; mode=block

# API Documentation
API_DOCS_ENABLED=true
API_DOCS_PATH=/api/docs
API_DOCS_TITLE=Urbanova API
API_DOCS_VERSION=1.0.0
API_DOCS_DESCRIPTION=API per il sistema di ricerca geografica Urbanova

# Testing
TEST_ENVIRONMENT=production
TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/urbanova_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_TIMEOUT=30000

# Deployment
DEPLOYMENT_ENVIRONMENT=production
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_BUILD_NUMBER=1
DEPLOYMENT_COMMIT_SHA=your_commit_sha_here
DEPLOYMENT_BRANCH=main

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# Metrics
METRICS_ENABLED=true
METRICS_PROVIDER=prometheus
METRICS_PORT=9090
METRICS_PATH=/metrics
METRICS_COLLECT_DEFAULT=true

# Alerts
ALERTS_ENABLED=true
ALERTS_PROVIDER=slack
ALERTS_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url
ALERTS_CHANNEL=#urbanova-alerts
ALERTS_SEVERITY_THRESHOLD=error

# Maintenance
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Sistema in manutenzione. Torneremo presto online.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# Development Tools (Disabled in Production)
DEBUG=false
VERBOSE_LOGGING=false
HOT_RELOAD=false
SOURCE_MAPS=false
